<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Ezequiel Toum" />

<meta name="date" content="2023-04-12" />

<title>(01) Package Overview</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">(01) Package Overview</h1>
<h4 class="author">Ezequiel Toum</h4>
<h4 class="date">2023-04-12</h4>


<div id="TOC">
<ul>
<li><a href="#motivation" id="toc-motivation">Motivation</a></li>
<li><a href="#package-design-principles" id="toc-package-design-principles">Package design principles</a></li>
<li><a href="#classes-and-subclasses" id="toc-classes-and-subclasses">Classes and subclasses</a></li>
</ul>
</div>

<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hydrotoolbox)</span></code></pre></div>
<div id="motivation" class="section level2">
<h2>Motivation</h2>
<p>Los datos hidro-meteorológicos proporcionados por agencias federales,
grupos de investigación y empresas privadas son de naturaleza
heterogénea (Argentina y Chile). Esta situación es multicausal: los
registros se guardan en diversos formatos, los procesos de control de
calidad no son los mismos entre agencias e incluso varían dentro del
mismo organismo, las variables no siempre se registran en la misma
resolución temporal, existen vacíos, datos dudosos, entre otros.
Incluso, una vez resueltos estos inconvenientes, es necesario contar con
métodos para poder manipular las series: agregación temporal,
visualización dinámica para su análisis, gráficos estáticos para
publicar y/o comunicar resultados, técnicas para corregir y/o modificar
las series, entre otros. <strong>hydrotoolbox</strong> es un paquete
escrito en el lenguaje R bajo el paradigma de programación orientada a
objetos y fue diseñado para cumplir con estas tareas. Esta versión está
pensada para trabajar no solo con series hidro-meteorológicas sino que
también con cualquier conjunto de series temporales que puedan colocarse
en una tabla.</p>
<hr />
<p>The hydro-meteorological data provided by federal agencies, research
groups and private companies are all but homogeneous (Argentina and
Chile). There are many reasons for this issue: diverse raw data formats,
data-quality check process is not the same between agencies (and
sometimes even inside the same bureau), meteorological variables are not
always recorded in the same time resolution, there are time-steps gaps
between measurements and mistrustful time periods. Even once these
problems are solved, tools are needed to efficiently manipulate this
data-sets: functions for automatically reading the raw data, temporally
aggregation of the data-sets, visualization techniques for analyzing the
data in combination with static plots for publishing results, data
manipulation techniques in order to correct the time-series, among
others. <strong>hydrotoolbox</strong> is an object-oriented R package
created with the aim of giving a pragmatic answer to the above mentioned
issues. It could also be used to pre and post-process the input/oputput
data of hydrological models.</p>
<hr />
<p>Si bien el paquete contiene funciones y métodos que son exclusivos
para trabajar con las principales bases de datos de Argentina y Chile,
su uso es general. A modo de ejemplo, el usuario las viñetas muestran la
cómo usar el paquete con datos provenientes de Canadá
(<code>vignettes(package = &quot;hydrotoolbox&quot;)</code>).</p>
<hr />
<p>Although the package has specific functions and methods to work with
the main hydro-meteorological databases of Argentina and Chile, its use
is general. As an example, the reader will find in these vignettes
applications with data from Canada (see
<code>vignettes(package = &quot;hydrotoolbox&quot;)</code>).</p>
</div>
<div id="package-design-principles" class="section level2">
<h2>Package design principles</h2>
<ol style="list-style-type: decimal">
<li><p><strong>Las series deben aglomerarse en estaciones</strong> para
que el usuario pueda agrupar los datos según su ubicación espacial, es
decir, en estaciones meteorológicas. Esta característica permite que se
puedan comparar series registradas en una misma estación y entre
diferentes estaciones sin perder su localización geográfica.</p></li>
<li><p><strong>Las modificaciones deben registrarse en un mismo
archivo</strong> para evitar la multiplicidad de versiones. Esto sucede
porque los instrumentos fallan, no todas las variables no se miden en la
misma resolución temporal, se producen cortes de energía o porque
algunas veces las propias condiciones naturales del lugar inducen a
mediciones erróneas que alguna requieren corrección (<em>e.g.</em>: el
sub-registro de eventos níveos como consecuencia del efecto del viento
sobre el totalizador).</p></li>
<li><p><strong>Visualización expeditiva y flexible</strong> para
analizar y comunicar resultados. Los gráficos se deben poder ver de
manera estática y dinámica.</p></li>
<li><p>Deben existir <strong>funciones generales</strong> para la
manipulación de los datos.</p></li>
<li><p><strong>Diseño abierto</strong> para incorporar nuevos objetos
y/o métodos que permitan seguir ampliando la funcionalidad del
paquete.</p></li>
</ol>
<hr />
<ol style="list-style-type: decimal">
<li><p><strong>Data should be agglomerated in stations</strong>: this
criteria is guided by a geographic judgment, so the data must be group
according to their spatial location, that means in meteorological
stations. This feature allows for the comparison of variables measured
in the same station and between different stations without loosing their
geographic location, a fundamental aspect for the physical
interpretation of the recorded data.</p></li>
<li><p><strong>Modifications must be recorded in a single file</strong>:
is unavoidable that raw data came with some kind of error or mistrustful
record periods. This is because instruments fails, variables are not
measured at the same temporal resolution, there are energy shortcuts or
because the natural conditions induce to errors (e.g.: snowfall wind
driven undercatch). As a direct consequence, its crucial to get access
to all the data versions (avoiding the multiple files version
issue).</p></li>
<li><p><strong>Quick plotting features</strong>: a fast and flexible
data visualization technique is the best way of analyze and communicate
results. The plotting should be done in static or dynamic
fashion.</p></li>
<li><p><strong>Hydrological related functionality</strong>: this feature
avoids the endless own made function creation, saving a lot of time
among <em>R-hydro</em> community.</p></li>
<li><p><strong>An open ended design</strong>: in order to allow the
incorporation of new objects, methods and functions.</p></li>
</ol>
</div>
<div id="classes-and-subclasses" class="section level2">
<h2>Classes and subclasses</h2>
<p>Existe una clase y dos subclases:</p>
<p>A. <strong>clase<code>hydromet</code></strong>: contiene los
metadatos de una estación (<em>e.g.</em>: coordenadas geográficas,
nombre de la cuenca, país, entre otros). Ver <code>?hydromet</code>.</p>
<p>B. <strong>subclase <code>hydromet_station</code></strong>: le
adiciona a la clase <code>hydromet</code> una tabla
(<code>data.frame</code>) por cada variable hidro-meteorológica. Esto le
permite al usuario guardar toda la información concerniente a una
estación real. Ver <code>?hydromet_station</code>.</p>
<p>C. <strong>subclase <code>hydromet_compact</code></strong>: fue
creada para guardar en una sola tabla (<code>data.frame</code>) todas
las series de ineterés. Adquiere especial interés cuando se quieren
almacenar salidas o entradas de un modelo o varias series de una misma
variable (<em>e.g.</em>: precipitación). Ver
<code>?hydromet_compact</code>.</p>
<hr />
<p>There is a single class and two subclasses:</p>
<p>A. <strong><code>hydromet</code> class</strong>: contains the station
metadata (e.g.: geographical coordinates, river basin, province,
country). See <code>?hydromet</code>.</p>
<p>B. <strong><code>hydromet_station</code> subclass</strong>: adds to
the <code>hydromet</code> metadata a single table
(<code>data.frame</code>) per hydro-meteorological recorded variable.
This allows the user to store all the information that surrounds a real
world station. See <code>?hydromet_station</code>.</p>
<p>C. <strong><code>hydromet_compact</code> subclass</strong>: it was
created to store in a single <code>data.frame</code> (called
<em>compact</em>) all the series. This object was designed to save
input/output data of hydrological models and to store (in the same
table) series of the same variable. The last feature allows performing,
for example, regional analyses. See <code>?hydromet_compact</code>.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
